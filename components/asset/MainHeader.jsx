import React, { useRef, useState } from "react";
import Image from "next/image";
import { myLoader } from "./myLoader";
import Toggle from "./Toggle";
import { MainHeaderStyle } from "./headerStyle";
import RightMenu from "./RightMenu";
import { useRouter } from "next/dist/client/router";
const MainHeader = ({ white, applied, notoggle, message, backBtn }) => {
  const [activeMenu, setActiveMenu] = useState(false);
  const [menuToggle, setMenuToggle] = useState(false);
  const [checkBg, setCheckBg] = useState(false);
  const mainBarRef = useRef();
  const mainRef = useRef();
  const menuActive = () => {
    if (!menuToggle) {
      mainBarRef.current.style.display = "flex";
      mainRef.current.style.position = "fixed";
      mainRef.current.style.zIndex = "1000";
      mainBarRef.current.style.zIndex = "1000";
      setTimeout(() => {
        setMenuToggle(true);
      }, 200);
    }
    if (menuToggle) {
      setMenuToggle(false);
      // setCheckBg(true);
      setTimeout(() => {
        // mainBarRef.current.style.zIndex = '100'
        // mainBarRef.current.style.display = "none";
        mainRef.current.style.zIndex = "-100";
        mainBarRef.current.style.zIndex = "-100";
      }, 500);
    }
    // setActiveMenu(true);
  };
  const closeBtn = () => {
    setActiveMenu(false);
  };
  const history = useRouter();
  const backbtn = () => {
    history.back();
  };
  const goHome = (e) => {
    history.push("/");
  };

  return (
    <>
      <MainHeaderStyle applied={applied} style={white ? { background: "#fff" } : {}}>
        {applied ? (
          <Image onClick={backBtn ? backBtn : backbtn} loader={myLoader} src="/imgs/backimg.png" alt="me" width="24" height="24" />
        ) : (
          <svg onClick={goHome} width="80" height="56" viewBox="0 0 80 56" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M45.4286 12.8706L46.3372 17.1391C46.4729 17.7766 47.3287 17.8951 47.637 17.3191L49.7042 13.4577C49.9347 13.0272 49.6678 12.5003 49.1859 12.4344L46.2101 12.0273C45.7292 11.9615 45.3273 12.3951 45.4286 12.8706Z"
              fill="#6100FF"
            />
            <path
              d="M51.4664 14.2669L49.2932 18.0412C48.9685 18.6052 49.5178 19.2756 50.1287 19.0607L54.2295 17.6179C54.6878 17.4566 54.8435 16.8826 54.5313 16.505L52.6035 14.1736C52.293 13.798 51.7087 13.846 51.4664 14.2669Z"
              fill="#6100FF"
            />
            <path
              d="M29.4869 29.7762V30.7065C29.4976 30.9841 29.4202 31.2579 29.2662 31.4879C29.1784 31.5881 29.0687 31.6664 28.9458 31.7164C28.823 31.7664 28.6903 31.7869 28.5583 31.7762H12.93C12.8004 31.791 12.6691 31.7723 12.5486 31.7219C12.428 31.6715 12.322 31.591 12.2405 31.4879C12.0722 31.2641 11.9875 30.9873 12.0015 30.7065V29.7762H29.4869ZM24.5501 40.3532V35.3391H15.5317C15.261 35.3658 14.9892 35.3003 14.7594 35.1531C14.5756 35.0322 14.502 34.8089 14.502 34.4368V33.274H25.7636C25.9409 33.2564 26.12 33.2745 26.2904 33.3271C26.4608 33.3798 26.6192 33.4661 26.7565 33.5809C26.9717 33.921 27.0717 34.3226 27.0415 34.7252V39.3765C27.0474 39.5096 27.0251 39.6424 26.9759 39.7659C26.9267 39.8895 26.8519 40.001 26.7565 40.0928C26.5287 40.2474 26.2585 40.3256 25.9843 40.316L24.5501 40.3532ZM24.2651 27.8692C23.2965 27.9594 22.3295 27.6808 21.5532 27.0878C21.2179 26.7464 20.9615 26.3341 20.8025 25.8805C20.6436 25.4269 20.586 24.9433 20.6339 24.4644V21.6271C20.6096 21.51 20.6146 21.3885 20.6487 21.2738C20.6828 21.1591 20.7447 21.0549 20.8288 20.9707C20.913 20.8865 21.0166 20.825 21.1303 20.7918C21.244 20.7586 21.3641 20.7547 21.4796 20.7806H27.2345V21.9527C27.2516 22.0827 27.2389 22.2148 27.1974 22.339C27.156 22.4632 27.0869 22.5761 26.9955 22.669C26.7548 22.8058 26.4806 22.8703 26.2049 22.8551H23.1528V24.3435C23.124 24.5492 23.1412 24.7589 23.2033 24.9569C23.2654 25.155 23.3706 25.3364 23.5113 25.4877C23.8415 25.72 24.2413 25.8286 24.6421 25.7947H27.4V26.9668C27.417 27.0968 27.4044 27.2289 27.3629 27.3531C27.3215 27.4773 27.2524 27.5902 27.161 27.6831C26.9203 27.8199 26.646 27.8844 26.3704 27.8692H24.2651ZM17.0945 27.8692C16.1108 27.9685 15.1262 27.6896 14.3366 27.0878C14.0012 26.7464 13.7449 26.3341 13.5859 25.8805C13.427 25.4269 13.3693 24.9433 13.4172 24.4644V21.6271C13.3983 21.3889 13.4707 21.1523 13.6195 20.9666C13.8057 20.8227 14.0392 20.7562 14.2722 20.7806H19.9903V21.9527C20.0096 22.0827 19.9979 22.2155 19.9563 22.3401C19.9148 22.4646 19.8445 22.5774 19.7513 22.669C19.5106 22.8058 19.2364 22.8703 18.9607 22.8551H15.9086V24.3435C15.881 24.5506 15.8988 24.7613 15.9608 24.9607C16.0227 25.1601 16.1273 25.3432 16.2671 25.497C16.6035 25.7232 17.0041 25.8311 17.4071 25.804H20.165V26.9668C20.182 27.0968 20.1693 27.2289 20.1279 27.3531C20.0865 27.4773 20.0174 27.5902 19.926 27.6831C19.6853 27.8199 19.411 27.8844 19.1354 27.8692H17.0945ZM21.2958 28.1761H20.2386C20.1012 28.1786 19.9703 28.2355 19.874 28.3347C19.7777 28.4339 19.7237 28.5674 19.7237 28.7064V29.7762H21.8106V28.7064C21.8106 28.5674 21.7567 28.4339 21.6604 28.3347C21.5641 28.2355 21.4332 28.1786 21.2958 28.1761Z"
              fill="#6100FF"
            />
            <path
              d="M48.8015 29.7762V30.7065C48.8122 30.9841 48.7349 31.2579 48.5809 31.4879C48.493 31.5881 48.3834 31.6664 48.2605 31.7164C48.1377 31.7664 48.005 31.7869 47.873 31.7762H32.2447C32.1151 31.791 31.9838 31.7723 31.8632 31.7219C31.7427 31.6715 31.6367 31.591 31.5552 31.4879C31.3869 31.2641 31.3022 30.9873 31.3162 30.7065V29.7762H48.8015ZM43.8648 40.3532V35.3391H34.8464C34.5757 35.3658 34.3039 35.3003 34.0741 35.1531C33.8903 35.0322 33.8167 34.8089 33.8167 34.4368V33.274H45.0783C45.2556 33.2564 45.4346 33.2745 45.605 33.3271C45.7754 33.3798 45.9338 33.4661 46.0712 33.5809C46.2863 33.921 46.3864 34.3226 46.3562 34.7252V39.3765C46.3621 39.5095 46.3398 39.6424 46.2906 39.7659C46.2414 39.8895 46.1666 40.001 46.0712 40.0928C45.8433 40.2474 45.5731 40.3256 45.299 40.316L43.8648 40.3532ZM43.5798 27.8692C42.6112 27.9594 41.6442 27.6808 40.8679 27.0878C40.5325 26.7464 40.2762 26.3341 40.1172 25.8805C39.9582 25.4269 39.9006 24.9433 39.9485 24.4644V21.6271C39.9242 21.51 39.9293 21.3885 39.9634 21.2738C39.9975 21.1591 40.0594 21.0549 40.1435 20.9707C40.2277 20.8865 40.3313 20.825 40.445 20.7918C40.5587 20.7586 40.6788 20.7547 40.7943 20.7806H46.54V21.9527C46.5571 22.0827 46.5444 22.2148 46.5029 22.339C46.4615 22.4632 46.3924 22.5761 46.301 22.669C46.0603 22.8058 45.7861 22.8703 45.5104 22.8551H42.4583V24.3435C42.4295 24.5492 42.4467 24.7589 42.5088 24.9569C42.5709 25.155 42.6761 25.3364 42.8168 25.4877C43.147 25.72 43.5468 25.8286 43.9476 25.7947H46.7055V26.9668C46.7225 27.0968 46.7099 27.2289 46.6684 27.3531C46.627 27.4773 46.5579 27.5902 46.4665 27.6831C46.2258 27.8199 45.9515 27.8844 45.6759 27.8692H43.5798ZM36.4092 27.8692C35.4255 27.9685 34.4409 27.6896 33.6513 27.0878C33.3159 26.7464 33.0596 26.3341 32.9006 25.8805C32.7417 25.4269 32.684 24.9433 32.7319 24.4644V21.6271C32.713 21.3889 32.7854 21.1523 32.9342 20.9666C33.1204 20.8227 33.3539 20.7562 33.5869 20.7806H39.305V21.9527C39.3243 22.0827 39.3126 22.2155 39.271 22.3401C39.2295 22.4646 39.1592 22.5774 39.066 22.669C38.8257 22.8068 38.5512 22.8714 38.2754 22.8551H35.2233V24.3435C35.1957 24.5506 35.2135 24.7613 35.2755 24.9607C35.3374 25.1601 35.442 25.3432 35.5818 25.497C35.9181 25.7232 36.3188 25.8311 36.7218 25.804H39.4797V26.9668C39.4989 27.0968 39.4873 27.2296 39.4457 27.3542C39.4041 27.4788 39.3339 27.5915 39.2407 27.6831C39 27.8199 38.7257 27.8844 38.4501 27.8692H36.4092ZM40.6104 28.1761H39.5532C39.4159 28.1786 39.2849 28.2355 39.1886 28.3347C39.0923 28.4339 39.0384 28.5674 39.0384 28.7064V29.7762H41.1253V28.7064C41.1253 28.5674 41.0713 28.4339 40.975 28.3347C40.8788 28.2355 40.7478 28.1786 40.6104 28.1761Z"
              fill="#6100FF"
            />
            <path
              d="M56.4227 30.4273C56.2908 30.6033 56.0961 30.7202 55.8803 30.7529C55.7883 30.7739 55.6926 30.7721 55.6015 30.7478C55.5103 30.7235 55.4262 30.6774 55.3563 30.6134L54.6484 29.9994C54.8507 29.7483 55.0253 29.4692 55.2276 29.1622C55.4298 28.8552 55.5953 28.5668 55.7608 28.2319C55.2876 27.6378 54.8487 27.0166 54.4462 26.3714C54.1796 26.8644 53.8946 27.3017 53.5269 27.8412C53.1738 28.3766 52.7804 28.8835 52.3501 29.3575C52.2129 29.5274 52.0208 29.6427 51.8077 29.6831C51.7186 29.7041 51.6257 29.7024 51.5375 29.678C51.4492 29.6536 51.3683 29.6075 51.3021 29.5436L50.5942 28.9482C51.4635 27.8332 52.1353 26.5743 52.58 25.2272C53.0421 23.7983 53.3503 22.323 53.4993 20.8271L55.0989 21.0317C55.3232 21.0483 55.5391 21.1254 55.724 21.255C55.7774 21.3466 55.8123 21.4481 55.8265 21.5535C55.8407 21.659 55.834 21.7662 55.8067 21.869C55.724 22.2225 55.6596 22.5667 55.6045 22.8922C55.5493 23.2178 55.4206 23.6086 55.3195 23.9807C55.5034 24.3435 55.7056 24.7155 55.9079 25.0597C56.0784 25.4376 56.2879 25.7963 56.533 26.1296C56.8089 25.2988 57.03 24.4503 57.1949 23.5899C57.3644 22.6666 57.4871 21.7352 57.5626 20.7992L59.1806 21.0224C59.3994 21.0386 59.6094 21.1159 59.7874 21.2457C59.8465 21.3348 59.8861 21.4357 59.9035 21.5416C59.921 21.6475 59.9158 21.7559 59.8885 21.8597C59.8057 22.269 59.7506 22.6597 59.6862 23.069C59.6219 23.4783 59.5208 23.9062 59.4288 24.3155C59.7674 24.9857 60.145 25.6349 60.5596 26.2598C60.9353 26.8628 61.3531 27.4379 61.8099 27.9808L60.8905 28.911C60.8436 28.9634 60.7847 29.0034 60.7191 29.0278C60.6534 29.0521 60.5829 29.0599 60.5136 29.0505C60.4377 29.0506 60.3629 29.032 60.2957 28.9964C60.2284 28.9607 60.1707 28.9091 60.1275 28.8459C59.5654 28.1969 59.0434 27.5135 58.5647 26.7993C58.2949 27.4193 57.9879 28.022 57.6454 28.604C57.2877 29.2446 56.8787 29.8544 56.4227 30.4273ZM61.4421 40.5578C60.5937 40.5606 59.7469 40.4796 58.914 40.316C58.1765 40.1686 57.4702 39.8915 56.8272 39.4974C56.2323 39.1042 55.7402 38.5712 55.3931 37.9438C55.0154 37.2101 54.8347 36.3889 54.869 35.5624V33.0693C54.865 32.8616 54.9297 32.6586 55.0529 32.4925C55.1282 32.4018 55.2252 32.332 55.3345 32.2897C55.4439 32.2474 55.5621 32.2339 55.678 32.2506H67.1878C67.3063 32.238 67.426 32.2533 67.5376 32.2952C67.6493 32.3372 67.7498 32.4047 67.8314 32.4925C67.9371 32.6661 67.9943 32.8654 67.9968 33.0693V35.5624C68.0178 36.3877 67.8379 37.2055 67.4728 37.9438C67.1186 38.56 66.6354 39.0903 66.0571 39.4974C65.4109 39.8848 64.7057 40.1614 63.9702 40.316C63.1372 40.4787 62.2906 40.5597 61.4421 40.5578ZM61.4421 38.5299C61.9782 38.5278 62.5132 38.4811 63.0418 38.3904C63.4979 38.3002 63.936 38.1336 64.338 37.8973C64.6917 37.6572 64.9871 37.3392 65.2021 36.9671C65.4147 36.5076 65.5186 36.0044 65.5055 35.4972V34.2879H57.3512V35.4786C57.3375 35.989 57.4513 36.4945 57.6821 36.9484C57.8834 37.3307 58.1817 37.6518 58.5463 37.8787C58.9468 38.1179 59.3855 38.2848 59.8425 38.3718C60.3704 38.4696 60.9055 38.5225 61.4421 38.5299ZM65.6066 31.0878V26.3807H64.2552V30.1017C64.2665 30.2326 64.2466 30.3644 64.197 30.4858C64.1474 30.6073 64.0696 30.7148 63.9702 30.7994C63.7507 30.9728 63.476 31.0589 63.198 31.0413H61.865V20.334H63.198C63.4722 20.3245 63.7424 20.4026 63.9702 20.5573C64.0657 20.6491 64.1405 20.7605 64.1897 20.8841C64.2388 21.0077 64.2612 21.1405 64.2552 21.2736V24.3248H65.6066V20.334H66.9396C67.2138 20.3245 67.484 20.4026 67.7119 20.5573C67.8073 20.6491 67.8821 20.7605 67.9313 20.8841C67.9804 21.0077 68.0028 21.1405 67.9968 21.2736V30.1576C68.0082 30.2885 67.9882 30.4202 67.9386 30.5416C67.889 30.6631 67.8112 30.7706 67.7119 30.8553C67.4923 31.0286 67.2176 31.1147 66.9396 31.0971L65.6066 31.0878Z"
              fill="black"
            />
          </svg>

          // <Image  loader={myLoader} src="/imgs/Logo.png" alt="me" width="80" height="56" />
        )}
        {message ? <span>{message}</span> : <></>}
        {notoggle ? (
          <button style={{ width: "24px", height: "24px" }}> </button>
        ) : (
          <>
            {" "}
            <button onClick={menuActive} className="toggle">
              <Toggle />
            </button>
          </>
        )}
      </MainHeaderStyle>
      <RightMenu mainRef={mainRef} checkBg={checkBg} menuActive={menuActive} mainBarRef={mainBarRef} menuToggle={menuToggle} closeBtn={closeBtn} />
    </>
  );
};

export default MainHeader;
